<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="format-detection" content="telephone=no">
        <title>{% block title %}EntryWeb{% endblock %}</title>
        <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text><text y=%221.3em%22 x=%220.2em%22 font-size=%2276%22 fill=%22%23fff%22>sf</text></svg>">
        {% block stylesheets %}
        {% endblock %}

        {% block javascripts %}
            {% block importmap %}{{ importmap('app') }}{% endblock %}
        {% endblock %}
    </head>
    <body>
        {% include '_partials/header.html.twig' %}
        
        <main>
            {% block body %}{% endblock %}
        </main>

        {% include '_partials/footer.html.twig' %}

        {% include '_partials/cookie_banner.html.twig' %}

        <div data-controller="floating-buttons">
            {# Chatbot Widget #}
            <div class="chatbot" data-controller="chatbot" data-chatbot-target="container">
                <button class="chatbot-toggle" data-action="click->chatbot#toggle" data-floating-buttons-target="chatbot" aria-label="Ouvrir le chat">
                    <svg class="chatbot-icon-open" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                    </svg>
                    <svg class="chatbot-icon-close" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                    <span class="chatbot-badge" data-chatbot-target="badge">1</span>
                </button>
                <div class="chatbot-window">
                    <div class="chatbot-header">
                        <div class="chatbot-header-info">
                            <div class="chatbot-avatar">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                                </svg>
                            </div>
                            <div>
                                <div class="chatbot-header-title">Assistant EntryWeb</div>
                                <div class="chatbot-header-status">En ligne</div>
                            </div>
                        </div>
                        <button class="chatbot-close" data-action="click->chatbot#close" aria-label="Fermer">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="18" y1="6" x2="6" y2="18"></line>
                                <line x1="6" y1="6" x2="18" y2="18"></line>
                            </svg>
                        </button>
                    </div>
                    <div class="chatbot-messages" data-chatbot-target="messages"></div>
                    <form class="chatbot-form" data-action="submit->chatbot#send">
                        <input
                            type="text"
                            class="chatbot-input"
                            placeholder="Tapez votre message..."
                            data-chatbot-target="input"
                            data-action="keydown->chatbot#handleKeydown"
                            autocomplete="off"
                        >
                        <button type="submit" class="chatbot-send" aria-label="Envoyer">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                            </svg>
                        </button>
                    </form>
                </div>
            </div>

            <a href="{{ path('app_contact') }}" class="floating-cta" data-floating-buttons-target="cta">
                <span class="floating-cta-badge">Gratuit</span>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <line x1="16" y1="13" x2="8" y2="13"></line>
                    <line x1="16" y1="17" x2="8" y2="17"></line>
                </svg>
                Devis gratuit
            </a>

            <button class="scroll-top" data-controller="scroll-top" data-action="click->scroll-top#scrollToTop" data-floating-buttons-target="scrollTop" aria-label="Retour en haut">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="18 15 12 9 6 15"></polyline>
                </svg>
            </button>
        </div>
    </body>
</html>
