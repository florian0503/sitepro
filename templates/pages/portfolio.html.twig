{% extends 'base.html.twig' %}

{% block title %}Réalisations - EntryWeb{% endblock %}

{% block body %}
<div data-controller="scroll-animation">
    <section class="page-hero">
        <div class="page-hero-inner">
            <h1 class="page-hero-title swiss-fade-up" data-scroll-animation-target="item">Nos Réalisations</h1>
            <p class="page-hero-description swiss-fade-up" data-scroll-animation-target="item" data-delay="100">
                Des sites modernes qui convertissent.
            </p>
        </div>
    </section>

    <section class="realisations" data-controller="realisations-filter">
        <div class="realisations-container">
            <div class="realisations-filters swiss-fade-up" data-scroll-animation-target="item" data-delay="200">
                <button type="button" class="realisations-filter-btn is-active" data-filter="all" data-realisations-filter-target="filterBtn" data-action="click->realisations-filter#filter">Tous</button>
                {% for category in categories %}
                    <button type="button" class="realisations-filter-btn" data-filter="{{ category.slug }}" data-realisations-filter-target="filterBtn" data-action="click->realisations-filter#filter">{{ category.name }}</button>
                {% endfor %}
            </div>

            <div class="realisations-grid">
                {% for realisation in realisations %}
                    <article class="realisations-card swiss-fade-up" data-category="{{ realisation.category.slug }}" data-scroll-animation-target="item" data-delay="{{ ((loop.index0 % 4) * 100) }}" data-realisations-filter-target="card">
                        <div class="realisations-card-image">
                            {% if realisation.imageName %}
                                <img src="{{ asset('uploads/realisations/' ~ realisation.imageName) }}" alt="{{ realisation.title }}">
                            {% else %}
                                <img src="https://via.placeholder.com/600x400?text={{ realisation.title|url_encode }}" alt="{{ realisation.title }}">
                            {% endif %}
                        </div>
                        <div class="realisations-card-body">
                            <div class="realisations-card-header">
                                <h2 class="realisations-card-title">{{ realisation.title }}</h2>
                                <span class="realisations-card-tag">{{ realisation.category.name }}</span>
                            </div>
                            <p class="realisations-card-desc">{{ realisation.description|slice(0, 150) }}{% if realisation.description|length > 150 %}...{% endif %}</p>
                            {% if realisation.url %}
                                <a href="{{ realisation.url }}" target="_blank" rel="noopener" class="realisations-card-link">Voir le site
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                                </a>
                            {% endif %}
                        </div>
                    </article>
                {% else %}
                    <div class="realisations-empty">
                        <p>Aucune réalisation pour le moment.</p>
                    </div>
                {% endfor %}
            </div>

            {% if realisations|length > 2 %}
                <div class="realisations-load-more">
                    <button type="button" class="btn-load-more is-hidden" data-realisations-filter-target="loadMoreBtn" data-action="click->realisations-filter#loadMore">
                        Voir plus
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9l6 6 6-6"/></svg>
                    </button>
                </div>
            {% endif %}
        </div>
    </section>

    <section class="cta swiss-scale" data-scroll-animation-target="item">
        <div class="cta-container">
            <h2 class="cta-title">Prêt à lancer votre site web ?</h2>
            <p class="cta-description">
                Discutons de votre projet dès aujourd'hui. Devis gratuit, sans engagement.
            </p>
            <a href="{{ path('app_contact') }}" class="btn btn-formule btn-formule-primary">Démarrer mon projet</a>
        </div>
    </section>
</div>
{% endblock %}
